<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Notas de Aulas de JavaScript: 8. Programa√ß√£o Ass√≠ncrona | Blog do Prof. Fabio</title><meta name=keywords content="js,callback,promise,async,await"><meta name=description content="Programa√ß√£o ass√≠ncrona No modelo de execu√ß√£o s√≠ncrono, as instru√ß√µes de um programa s√£o executadas em sequ√™ncia, uma ap√≥s a outra. Nesse modelo, quando uma instru√ß√£o demorada √© executada, o fluxo de execu√ß√£o fica bloqueado, aguardando seu t√©rmino para que as pr√≥ximas instru√ß√µes possam ser executadas.
No modelo de execu√ß√£o ass√≠ncrono, √© poss√≠vel executar mais de uma instru√ß√£o ao mesmo tempo. Assim, uma instru√ß√£o demorada poderia ser executada &ldquo;em segundo plano&rdquo;, enquanto o restante das instru√ß√µes continuam normalmente com seu fluxo de execu√ß√£o."><meta name=author content="Me"><link rel=canonical href=https://fabioboris.com.br/posts/notas-de-aulas/javascript/8-programacao-assincrona/><link href=/assets/css/stylesheet.min.1eef9c740af75b4e5f773d9d5f757e03e3df71f3a308e73070cc73d55a59a7d7.css integrity="sha256-Hu+cdAr3W05fdz2dX3V+A+PfcfOjCOcwcMxz1VpZp9c=" rel="preload stylesheet" as=style><link rel=icon href=https://fabioboris.com.br/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://fabioboris.com.br/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://fabioboris.com.br/favicon-32x32.png><link rel=apple-touch-icon href=https://fabioboris.com.br/apple-touch-icon.png><link rel=mask-icon href=https://fabioboris.com.br/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.81.0"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-8392091-2','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script><meta property="og:title" content="Notas de Aulas de JavaScript: 8. Programa√ß√£o Ass√≠ncrona"><meta property="og:description" content="Programa√ß√£o ass√≠ncrona No modelo de execu√ß√£o s√≠ncrono, as instru√ß√µes de um programa s√£o executadas em sequ√™ncia, uma ap√≥s a outra. Nesse modelo, quando uma instru√ß√£o demorada √© executada, o fluxo de execu√ß√£o fica bloqueado, aguardando seu t√©rmino para que as pr√≥ximas instru√ß√µes possam ser executadas.
No modelo de execu√ß√£o ass√≠ncrono, √© poss√≠vel executar mais de uma instru√ß√£o ao mesmo tempo. Assim, uma instru√ß√£o demorada poderia ser executada &ldquo;em segundo plano&rdquo;, enquanto o restante das instru√ß√µes continuam normalmente com seu fluxo de execu√ß√£o."><meta property="og:type" content="article"><meta property="og:url" content="https://fabioboris.com.br/posts/notas-de-aulas/javascript/8-programacao-assincrona/"><meta property="article:published_time" content="2021-03-05T20:50:10-03:00"><meta property="article:modified_time" content="2021-03-05T20:50:10-03:00"><meta property="og:site_name" content="Fabio Agostinho Boris"><meta name=twitter:card content="summary"><meta name=twitter:title content="Notas de Aulas de JavaScript: 8. Programa√ß√£o Ass√≠ncrona"><meta name=twitter:description content="Programa√ß√£o ass√≠ncrona No modelo de execu√ß√£o s√≠ncrono, as instru√ß√µes de um programa s√£o executadas em sequ√™ncia, uma ap√≥s a outra. Nesse modelo, quando uma instru√ß√£o demorada √© executada, o fluxo de execu√ß√£o fica bloqueado, aguardando seu t√©rmino para que as pr√≥ximas instru√ß√µes possam ser executadas.
No modelo de execu√ß√£o ass√≠ncrono, √© poss√≠vel executar mais de uma instru√ß√£o ao mesmo tempo. Assim, uma instru√ß√£o demorada poderia ser executada &ldquo;em segundo plano&rdquo;, enquanto o restante das instru√ß√µes continuam normalmente com seu fluxo de execu√ß√£o."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://fabioboris.com.br/posts/"},{"@type":"ListItem","position":2,"name":"Notas de Aulas de JavaScript: 8. Programa√ß√£o Ass√≠ncrona","item":"https://fabioboris.com.br/posts/notas-de-aulas/javascript/8-programacao-assincrona/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Notas de Aulas de JavaScript: 8. Programa√ß√£o Ass√≠ncrona","name":"Notas de Aulas de JavaScript: 8. Programa√ß√£o Ass√≠ncrona","description":"Programa√ß√£o ass√≠ncrona No modelo de execu√ß√£o s√≠ncrono, as instru√ß√µes de um programa s√£o executadas em sequ√™ncia, uma ap√≥s a outra. Nesse modelo, quando uma instru√ß√£o demorada √© ‚Ä¶","keywords":["js","callback","promise","async","await"],"articleBody":"Programa√ß√£o ass√≠ncrona No modelo de execu√ß√£o s√≠ncrono, as instru√ß√µes de um programa s√£o executadas em sequ√™ncia, uma ap√≥s a outra. Nesse modelo, quando uma instru√ß√£o demorada √© executada, o fluxo de execu√ß√£o fica bloqueado, aguardando seu t√©rmino para que as pr√≥ximas instru√ß√µes possam ser executadas.\nNo modelo de execu√ß√£o ass√≠ncrono, √© poss√≠vel executar mais de uma instru√ß√£o ao mesmo tempo. Assim, uma instru√ß√£o demorada poderia ser executada ‚Äúem segundo plano‚Äù, enquanto o restante das instru√ß√µes continuam normalmente com seu fluxo de execu√ß√£o.\nAlgumas linguagens de programa√ß√£o usam threads para executar c√≥digo ass√≠ncrono. Cada thread funciona como um novo fluxo de execu√ß√£o em um programa.\nEntretanto, JavaSript √© uma linguagem de programa√ß√£o single threaded, mesmo em computadores com m√∫ltiplos cores, um programa JavaScript √© executado em uma √∫nica thread.\nIsso n√£o significa que n√£o seja poss√≠vel executar instru√ß√µes de forma ass√≠ncrona com JavaScript. JavaScript utiliza uma t√©cnica conhecida como event loop, que permite o modelo de execu√ß√£o ass√≠ncrono em uma √∫nica thread.\nMais informa√ß√µes sobre o funcionamento do event loop em https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/EventLoop.\nUm primeiro exemplo No seguinte trecho de c√≥digo, a fun√ß√£o exemplo executa uma instru√ß√£o s√≠ncrona, segioda de uma instru√ß√£o ass√≠ncrona com um callback a partir da fun√ß√£o setTimeout, uma instru√ß√£o ass√≠ncrona com uma Promise, e finalmente, uma √∫ltima instru√ß√£o s√≠ncrona. Observe o resultado:\nfunction exemplo(){ console.log(\"S√≠ncrono: In√≠cio\"); setTimeout(() = { console.log(\"Ass√≠ncrono (Callback)\"); }); Promise.resolve().then(() = { console.log(\"Ass√≠ncrono (Promise)\"); }); console.log(\"S√≠ncrono: Fim\"); } exemplo(); // S√≠ncrono: In√≠cio // S√≠ncrono: Fim // Ass√≠ncrono (Promise) // Ass√≠ncrono (Callback) Callbacks Um callback √© uma fun√ß√£o passada como argumento para outra fun√ß√£o. Dessa forma, a fun√ß√£o que a recebeu pode execut√°-la ou pass√°-la adiante.\nNo exemplo a seguir s√£o declaradas duas fun√ß√µes clicouNoDocumento, usada no evento click do documento, e mostrarMensagem que √© passada para setTimeout para ser executada somente ap√≥s 10 segundos.\nfunction clicouNoDocumento(){ console.log(\"Usu√°rio clicou no documento\"); } function mostrarMensagem(){ alert(\"Ol√°! Tudo bem?\"); } // Exemplo 1: chamar a fun√ß√£o clicouNoDocumento quando o documento receber um clique document.addEventListener('click', clicouNoDocumento); // Exemplo 2: executar a fun√ß√£o mostrarMensagem ap√≥s 10 segundos setTimeout(mostrarMensagem, 10000); Sequ√™ncia de callbacks executados de forma ass√≠ncrona Nesse exemplo, uma sequ√™ncia de instru√ß√µes setTimeout disparam callbacks que enviam mensagem com console.log, entretanto, devido ao tempo programado em setTimeout, e pelo fato da execu√ß√£o acontecer de forma ass√≠ncrona, a ordem do resultado acontece da √∫ltima para a primeira instru√ß√£o.\nfunction sequenciaDeChanadas_V1(){ setTimeout(function(){ console.log(\"Mensagem 1\"); }, 1000); setTimeout(function(){ console.log(\"Mensagem 2\"); }, 800); setTimeout(function(){ console.log(\"Mensagem 3\"); }, 600); setTimeout(function(){ console.log(\"Mensagem 4\"); }, 400); setTimeout(function(){ console.log(\"Mensagem 5\"); }, 200); } sequenciaDeChanadas_V1(); // Mensagem 5 // Mensagem 4 // Mensagem 3 // Mensagem 2 // Mensagem 1 Sequ√™ncia de callbacks executados de forma s√≠ncrona No pr√≥ximo exemplo, as mesmas instru√ß√µes s√£o escritas de forma encadeada, de forma que as instru√ß√µes sejam executadas de forma s√≠ncrona.\nEssa cadeia de instru√ß√µes come√ßa aumentar a complexidade de compreens√£o do c√≥digo, sendo conhecida por alguns como callback hell ou indenta√ß√£o hadouken üòÅ.\nfunction sequenciaDeChamadas_V2(){ setTimeout(function(){ console.log(\"Mensagem 1\"); setTimeout(function(){ console.log(\"Mensagem 2\"); setTimeout(function(){ console.log(\"Mensagem 3\"); setTimeout(function(){ console.log(\"Mensagem 4\"); setTimeout(function(){ console.log(\"Mensagem 5\"); }, 200); }, 400); }, 600); }, 800); }, 1000); } sequenciaDeChamadas_V2(); // Mensagem 1 // Mensagem 2 // Mensagem 3 // Mensagem 4 // Mensagem 5 Mesmo com o tempo definido de forma decrescente em setTimeout, cada instru√ß√£o s√≥ inicia ap√≥s o t√©rmino da instru√ß√£o anterior.\nPromises Antes de falar de Promises, vejamos um exemplo de uma requisi√ß√£o AJAX usando o objeto XMLHttpRequest para obter dados da {JSON} Placeholder, uma API fake para testes e prototipa√ß√£o. A URL usada no exemplo √© https://jsonplaceholder.typicode.com/users/1, produzindo a seguinte sa√≠da no formato JSON.\n{ \"id\": 1, \"name\": \"Leanne Graham\", \"username\": \"Bret\", \"email\": \"Sincere@april.biz\", \"address\": { \"street\": \"Kulas Light\", \"suite\": \"Apt. 556\", \"city\": \"Gwenborough\", \"zipcode\": \"92998-3874\", \"geo\": { \"lat\": \"-37.3159\", \"lng\": \"81.1496\" } }, \"phone\": \"1-770-736-8031 x56442\", \"website\": \"hildegard.org\", \"company\": { \"name\": \"Romaguera-Crona\", \"catchPhrase\": \"Multi-layered client-server neural-net\", \"bs\": \"harness real-time e-markets\" } } A requisi√ß√£o ser√° feita a partir da fun√ß√£o getUser(id, callback, error), que dado um id ir√° obter o objeto JSON correspondente ao resultado da requisi√ß√£o, que ao terminar, executar√° uma fun√ß√£o callback para lidar com o resultado.\nfunction getUser(id, callback){ const xhr = new XMLHttpRequest(); xhr.onload = function(){ const json = JSON.parse(this.responseText); callback(json); }; const url = `https://jsonplaceholder.typicode.com/users/${id}`; xhr.open(\"GET\", url); xhr.send(); } getUser(1, user = { console.log(user); }); Para ilustrar o uso de Promise, usaremos a Fetch API, para realizar a mesma requisi√ß√£o ass√≠ncrona feita no exemplo anterior.\nA Fetch API oferece uma interface para buscar dados que retorna objetos do tipo Promise, que √© um tipo de objeto usado para o processamento ass√≠ncrono. Observe:\n// Usando callback como par√¢metro function getUser(id, callback){ const URL = `https://jsonplaceholder.typicode.com/users/${id}`; let user; fetch(URL) .then(response = response.json()) .then(user = { callback(user); }); } getUser(1, user = { console.log(user); }); // Usando retorno da Promise e await na chamada function getUser(id){ const URL = `https://jsonplaceholder.typicode.com/users/${id}`; return fetch(URL).then(response = response.json()); } console.log(await getUser(1)); Sintaxe async / await Uma instru√ß√£o async function define uma fun√ß√£o ass√≠ncrona, que retorna um objeto AsyncFunction, e o operador await √© utilizado para esperar por uma Promise, e deve ser usado dentro de uma async function.\nAgora, realizaremos o mesmo processo dos exemplos anteriores com a sintaxe async / await.\nasync function getUser(id){ const URL = `https://jsonplaceholder.typicode.com/users/${id}`; const response = await fetch(URL); return await response.json(); } console.log(await getUser(1)); Promise.all O m√©todo Promise.all retorna uma √∫nico objeto Promise que resolve quando todos os objetos Promises de seu argumento forem resolvidos. Esses objetos s√£o executados ao mesmo tempo, e quando todos terminarem, seus resultados ser√£o retornados.\nA JSON Placeholder API possui 6 resource endpoists para testes, posts, comments, albums, photos, todos e users. No pr√≥ximo exemplo faremos uma requisi√ß√£o para cada um dos resource endpoints em paralelo atrav√©s de Promise.all.\nconst base_url = \"https://jsonplaceholder.typicode.com\"; const resource_list = [\"posts\", \"comments\", \"albums\", \"photos\", \"todos\", \"users\"]; async function getResource(resource){ const url = `${base_url}/${resource}`; const response = await fetch(url); return await response.json(); } async function getAllResources(){ promises = []; resource_list.forEach(resource = { promises.push(getResource(resource)); }); return Promise.all(promises); } const [posts, comments, albums, photos, todos, users] = await getAllResources(); ","wordCount":"998","inLanguage":"en","datePublished":"2021-03-05T20:50:10-03:00","dateModified":"2021-03-05T20:50:10-03:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://fabioboris.com.br/posts/notas-de-aulas/javascript/8-programacao-assincrona/"},"publisher":{"@type":"Organization","name":"Blog do Prof. Fabio","logo":{"@type":"ImageObject","url":"https://fabioboris.com.br/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://fabioboris.com.br/ accesskey=h title="Blog do Prof. Fabio (Alt + H)">Blog do Prof. Fabio</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://fabioboris.com.br/archives/ title=Arquivo><span>Arquivo</span></a></li><li><a href=https://fabioboris.com.br/categories/ title=Categorias><span>Categorias</span></a></li><li><a href=https://fabioboris.com.br/search/ title="Pesquisar (Alt + /)" accesskey=/><span>Pesquisar</span></a></li><li><a href=https://fabioboris.com.br/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://fabioboris.com.br/>Home</a>&nbsp;¬ª&nbsp;<a href=https://fabioboris.com.br/posts/>Posts</a></div><h1 class=post-title>Notas de Aulas de JavaScript: 8. Programa√ß√£o Ass√≠ncrona</h1><div class=post-meta>March 5, 2021&nbsp;¬∑&nbsp;5 min&nbsp;¬∑&nbsp;Me</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#programa%c3%a7%c3%a3o-ass%c3%adncrona aria-label="Programa√ß√£o ass√≠ncrona">Programa√ß√£o ass√≠ncrona</a><ul><li><a href=#um-primeiro-exemplo aria-label="Um primeiro exemplo">Um primeiro exemplo</a></li><li><a href=#callbacks aria-label=Callbacks>Callbacks</a><ul><li><a href=#sequ%c3%aancia-de-callbacks-executados-de-forma-ass%c3%adncrona aria-label="Sequ√™ncia de callbacks executados de forma ass√≠ncrona">Sequ√™ncia de <em>callbacks</em> executados de forma ass√≠ncrona</a></li><li><a href=#sequ%c3%aancia-de-callbacks-executados-de-forma-s%c3%adncrona aria-label="Sequ√™ncia de callbacks executados de forma s√≠ncrona">Sequ√™ncia de <em>callbacks</em> executados de forma s√≠ncrona</a></li></ul></li><li><a href=#promises aria-label=Promises>Promises</a></li><li><a href=#sintaxe-async--await aria-label="Sintaxe async / await">Sintaxe async / await</a></li><li><a href=#promiseall aria-label=Promise.all><code>Promise.all</code></a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=programa√ß√£o-ass√≠ncrona>Programa√ß√£o ass√≠ncrona<a hidden class=anchor aria-hidden=true href=#programa√ß√£o-ass√≠ncrona>#</a></h2><p>No modelo de execu√ß√£o <strong>s√≠ncrono</strong>, as instru√ß√µes de um programa s√£o executadas em sequ√™ncia, uma ap√≥s a outra.
Nesse modelo, quando uma instru√ß√£o demorada √© executada, o fluxo de execu√ß√£o fica bloqueado, aguardando seu t√©rmino para que as pr√≥ximas instru√ß√µes possam ser executadas.</p><p>No modelo de execu√ß√£o <strong>ass√≠ncrono</strong>, √© poss√≠vel executar mais de uma instru√ß√£o ao mesmo tempo.
Assim, uma instru√ß√£o demorada poderia ser executada &ldquo;em segundo plano&rdquo;, enquanto o restante das instru√ß√µes continuam normalmente com seu fluxo de execu√ß√£o.</p><p>Algumas linguagens de programa√ß√£o usam <em>threads</em> para executar c√≥digo ass√≠ncrono.
Cada <em>thread</em> funciona como um novo fluxo de execu√ß√£o em um programa.</p><p>Entretanto, JavaSript √© uma linguagem de programa√ß√£o <em>single threaded</em>, mesmo em computadores com m√∫ltiplos <em>cores</em>, um programa JavaScript √© executado em uma √∫nica <em>thread</em>.</p><p>Isso n√£o significa que n√£o seja poss√≠vel executar instru√ß√µes de forma ass√≠ncrona com JavaScript.
JavaScript utiliza uma t√©cnica conhecida como <em>event loop</em>, que permite o modelo de execu√ß√£o ass√≠ncrono em uma √∫nica <em>thread</em>.</p><p>Mais informa√ß√µes sobre o funcionamento do <em>event loop</em> em <a href=https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/EventLoop>https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/EventLoop</a>.</p><h3 id=um-primeiro-exemplo>Um primeiro exemplo<a hidden class=anchor aria-hidden=true href=#um-primeiro-exemplo>#</a></h3><p>No seguinte trecho de c√≥digo, a fun√ß√£o <code>exemplo</code> executa uma instru√ß√£o s√≠ncrona, segioda de uma instru√ß√£o ass√≠ncrona com um <code>callback</code> a partir da fun√ß√£o <code>setTimeout</code>, uma instru√ß√£o ass√≠ncrona com uma <code>Promise</code>, e finalmente, uma √∫ltima instru√ß√£o s√≠ncrona. Observe o resultado:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>exemplo</span>(){
  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;S√≠ncrono: In√≠cio&#34;</span>);

  <span style=color:#a6e22e>setTimeout</span>(() =&gt; {
    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Ass√≠ncrono (Callback)&#34;</span>);
  });

  Promise.<span style=color:#a6e22e>resolve</span>().<span style=color:#a6e22e>then</span>(() =&gt; {
    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Ass√≠ncrono (Promise)&#34;</span>);
  });

  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;S√≠ncrono: Fim&#34;</span>);
}

<span style=color:#a6e22e>exemplo</span>();
<span style=color:#75715e>// S√≠ncrono: In√≠cio
</span><span style=color:#75715e>// S√≠ncrono: Fim
</span><span style=color:#75715e>// Ass√≠ncrono (Promise)
</span><span style=color:#75715e>// Ass√≠ncrono (Callback)
</span></code></pre></div><h3 id=callbacks>Callbacks<a hidden class=anchor aria-hidden=true href=#callbacks>#</a></h3><p>Um <em>callback</em> √© uma fun√ß√£o passada como argumento para outra fun√ß√£o.
Dessa forma, a fun√ß√£o que a recebeu pode execut√°-la ou pass√°-la adiante.</p><p>No exemplo a seguir s√£o declaradas duas fun√ß√µes <code>clicouNoDocumento</code>, usada no evento <code>click</code> do documento, e <code>mostrarMensagem</code> que √© passada para <code>setTimeout</code> para ser executada somente ap√≥s 10 segundos.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>clicouNoDocumento</span>(){
  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Usu√°rio clicou no documento&#34;</span>);
}
<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>mostrarMensagem</span>(){
  <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#34;Ol√°! Tudo bem?&#34;</span>);
}

<span style=color:#75715e>// Exemplo 1: chamar a fun√ß√£o clicouNoDocumento quando o documento receber um clique
</span><span style=color:#75715e></span>document.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#39;click&#39;</span>, <span style=color:#a6e22e>clicouNoDocumento</span>);

<span style=color:#75715e>// Exemplo 2: executar a fun√ß√£o mostrarMensagem ap√≥s 10 segundos
</span><span style=color:#75715e></span><span style=color:#a6e22e>setTimeout</span>(<span style=color:#a6e22e>mostrarMensagem</span>, <span style=color:#ae81ff>10000</span>);
</code></pre></div><h4 id=sequ√™ncia-de-callbacks-executados-de-forma-ass√≠ncrona>Sequ√™ncia de <em>callbacks</em> executados de forma ass√≠ncrona<a hidden class=anchor aria-hidden=true href=#sequ√™ncia-de-callbacks-executados-de-forma-ass√≠ncrona>#</a></h4><p>Nesse exemplo, uma sequ√™ncia de instru√ß√µes <code>setTimeout</code> disparam <code>callbacks</code> que enviam mensagem com <code>console.log</code>, entretanto, devido ao tempo programado em <code>setTimeout</code>, e pelo fato da execu√ß√£o acontecer de forma ass√≠ncrona, a ordem do resultado acontece da √∫ltima para a primeira instru√ß√£o.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>sequenciaDeChanadas_V1</span>(){
  <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>(){
    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Mensagem 1&#34;</span>);
  }, <span style=color:#ae81ff>1000</span>);
  <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>(){
    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Mensagem 2&#34;</span>);
  }, <span style=color:#ae81ff>800</span>);
  <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>(){
    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Mensagem 3&#34;</span>);
  }, <span style=color:#ae81ff>600</span>);
  <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>(){
    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Mensagem 4&#34;</span>);
  }, <span style=color:#ae81ff>400</span>);
  <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>(){
    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Mensagem 5&#34;</span>);
  }, <span style=color:#ae81ff>200</span>);
}

<span style=color:#a6e22e>sequenciaDeChanadas_V1</span>();
<span style=color:#75715e>// Mensagem 5
</span><span style=color:#75715e>// Mensagem 4
</span><span style=color:#75715e>// Mensagem 3
</span><span style=color:#75715e>// Mensagem 2
</span><span style=color:#75715e>// Mensagem 1
</span></code></pre></div><h4 id=sequ√™ncia-de-callbacks-executados-de-forma-s√≠ncrona>Sequ√™ncia de <em>callbacks</em> executados de forma s√≠ncrona<a hidden class=anchor aria-hidden=true href=#sequ√™ncia-de-callbacks-executados-de-forma-s√≠ncrona>#</a></h4><p>No pr√≥ximo exemplo, as mesmas instru√ß√µes s√£o escritas de forma encadeada, de forma que as instru√ß√µes sejam executadas de forma s√≠ncrona.</p><p>Essa cadeia de instru√ß√µes come√ßa aumentar a complexidade de compreens√£o do c√≥digo, sendo conhecida por alguns como <em>callback hell</em> ou <em>indenta√ß√£o hadouken</em> üòÅ.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>sequenciaDeChamadas_V2</span>(){
    <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>(){
        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Mensagem 1&#34;</span>);
        <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>(){
            <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Mensagem 2&#34;</span>);
            <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>(){
                <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Mensagem 3&#34;</span>);
                <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>(){
                    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Mensagem 4&#34;</span>);
                    <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>(){
                        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Mensagem 5&#34;</span>);
                    }, <span style=color:#ae81ff>200</span>);
                }, <span style=color:#ae81ff>400</span>);
            }, <span style=color:#ae81ff>600</span>);
        }, <span style=color:#ae81ff>800</span>);
    }, <span style=color:#ae81ff>1000</span>);
}

<span style=color:#a6e22e>sequenciaDeChamadas_V2</span>();
<span style=color:#75715e>// Mensagem 1
</span><span style=color:#75715e>// Mensagem 2
</span><span style=color:#75715e>// Mensagem 3
</span><span style=color:#75715e>// Mensagem 4
</span><span style=color:#75715e>// Mensagem 5
</span></code></pre></div><p>Mesmo com o tempo definido de forma decrescente em <code>setTimeout</code>, cada instru√ß√£o s√≥ inicia ap√≥s o t√©rmino da instru√ß√£o anterior.</p><h3 id=promises>Promises<a hidden class=anchor aria-hidden=true href=#promises>#</a></h3><p>Antes de falar de Promises, vejamos um exemplo de uma requisi√ß√£o AJAX usando o objeto <code>XMLHttpRequest</code> para obter dados da <em>{JSON} Placeholder</em>, uma API <em>fake</em> para testes e prototipa√ß√£o. A URL usada no exemplo √© <a href=https://jsonplaceholder.typicode.com/users/1>https://jsonplaceholder.typicode.com/users/1</a>, produzindo a seguinte sa√≠da no formato <em>JSON</em>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#ae81ff>1</span>,
  <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Leanne Graham&#34;</span>,
  <span style=color:#f92672>&#34;username&#34;</span>: <span style=color:#e6db74>&#34;Bret&#34;</span>,
  <span style=color:#f92672>&#34;email&#34;</span>: <span style=color:#e6db74>&#34;Sincere@april.biz&#34;</span>,
  <span style=color:#f92672>&#34;address&#34;</span>: {
    <span style=color:#f92672>&#34;street&#34;</span>: <span style=color:#e6db74>&#34;Kulas Light&#34;</span>,
    <span style=color:#f92672>&#34;suite&#34;</span>: <span style=color:#e6db74>&#34;Apt. 556&#34;</span>,
    <span style=color:#f92672>&#34;city&#34;</span>: <span style=color:#e6db74>&#34;Gwenborough&#34;</span>,
    <span style=color:#f92672>&#34;zipcode&#34;</span>: <span style=color:#e6db74>&#34;92998-3874&#34;</span>,
    <span style=color:#f92672>&#34;geo&#34;</span>: {
      <span style=color:#f92672>&#34;lat&#34;</span>: <span style=color:#e6db74>&#34;-37.3159&#34;</span>,
      <span style=color:#f92672>&#34;lng&#34;</span>: <span style=color:#e6db74>&#34;81.1496&#34;</span>
    }
  },
  <span style=color:#f92672>&#34;phone&#34;</span>: <span style=color:#e6db74>&#34;1-770-736-8031 x56442&#34;</span>,
  <span style=color:#f92672>&#34;website&#34;</span>: <span style=color:#e6db74>&#34;hildegard.org&#34;</span>,
  <span style=color:#f92672>&#34;company&#34;</span>: {
    <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Romaguera-Crona&#34;</span>,
    <span style=color:#f92672>&#34;catchPhrase&#34;</span>: <span style=color:#e6db74>&#34;Multi-layered client-server neural-net&#34;</span>,
    <span style=color:#f92672>&#34;bs&#34;</span>: <span style=color:#e6db74>&#34;harness real-time e-markets&#34;</span>
  }
}
</code></pre></div><p>A requisi√ß√£o ser√° feita a partir da fun√ß√£o <code>getUser(id, callback, error)</code>, que dado um <code>id</code> ir√° obter o objeto <code>JSON</code> correspondente ao resultado da requisi√ß√£o, que ao terminar, executar√° uma fun√ß√£o <code>callback</code> para lidar com o resultado.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getUser</span>(<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>callback</span>){
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>xhr</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>XMLHttpRequest</span>();
  <span style=color:#a6e22e>xhr</span>.<span style=color:#a6e22e>onload</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>(){
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>json</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>responseText</span>);
    <span style=color:#a6e22e>callback</span>(<span style=color:#a6e22e>json</span>);
  };
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`https://jsonplaceholder.typicode.com/users/</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>id</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>;
  <span style=color:#a6e22e>xhr</span>.<span style=color:#a6e22e>open</span>(<span style=color:#e6db74>&#34;GET&#34;</span>, <span style=color:#a6e22e>url</span>);
  <span style=color:#a6e22e>xhr</span>.<span style=color:#a6e22e>send</span>();
}
<span style=color:#a6e22e>getUser</span>(<span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>user</span> =&gt; { <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>user</span>); });
</code></pre></div><p>Para ilustrar o uso de <code>Promise</code>, usaremos a <a href=https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API><code>Fetch API</code></a>, para realizar a mesma requisi√ß√£o ass√≠ncrona feita no exemplo anterior.</p><p>A <code>Fetch API</code> oferece uma interface para buscar dados que retorna objetos do tipo <code>Promise</code>, que √© um tipo de objeto usado para o processamento ass√≠ncrono. Observe:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#75715e>// Usando callback como par√¢metro
</span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getUser</span>(<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>callback</span>){
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>URL</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`https://jsonplaceholder.typicode.com/users/</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>id</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>;
  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>user</span>;
  <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>URL</span>)
    .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>response</span> =&gt; <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>json</span>())
    .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>user</span> =&gt; { <span style=color:#a6e22e>callback</span>(<span style=color:#a6e22e>user</span>); });
}
<span style=color:#a6e22e>getUser</span>(<span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>user</span> =&gt; { <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>user</span>); });

<span style=color:#75715e>// Usando retorno da Promise e await na chamada
</span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getUser</span>(<span style=color:#a6e22e>id</span>){
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>URL</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`https://jsonplaceholder.typicode.com/users/</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>id</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>;
  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>URL</span>).<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>response</span> =&gt; <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>json</span>());
}
<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getUser</span>(<span style=color:#ae81ff>1</span>));
</code></pre></div><h3 id=sintaxe-async--await>Sintaxe async / await<a hidden class=anchor aria-hidden=true href=#sintaxe-async--await>#</a></h3><p>Uma instru√ß√£o <code>async function</code> define uma fun√ß√£o ass√≠ncrona, que retorna um objeto <code>AsyncFunction</code>, e o operador <code>await</code> √© utilizado para esperar por uma <code>Promise</code>, e deve ser usado dentro de uma <code>async function</code>.</p><p>Agora, realizaremos o mesmo processo dos exemplos anteriores com a sintaxe <code>async</code> / <code>await</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getUser</span>(<span style=color:#a6e22e>id</span>){
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>URL</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`https://jsonplaceholder.typicode.com/users/</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>id</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>;
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>URL</span>);
  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>json</span>();
}
<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getUser</span>(<span style=color:#ae81ff>1</span>));
</code></pre></div><h3 id=promiseall><code>Promise.all</code><a hidden class=anchor aria-hidden=true href=#promiseall>#</a></h3><p>O m√©todo <code>Promise.all</code> retorna uma √∫nico objeto <code>Promise</code> que resolve quando todos os objetos <code>Promises</code> de seu argumento forem resolvidos. Esses objetos s√£o executados ao mesmo tempo, e quando todos terminarem, seus resultados ser√£o retornados.</p><p>A <em>JSON Placeholder API</em> possui 6 <em>resource endpoists</em> para testes, <code>posts</code>, <code>comments</code>, <code>albums</code>, <code>photos</code>, <code>todos</code> e <code>users</code>.
No pr√≥ximo exemplo faremos uma requisi√ß√£o para cada um dos <em>resource endpoints</em> em paralelo atrav√©s de <code>Promise.all</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>base_url</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://jsonplaceholder.typicode.com&#34;</span>;
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>resource_list</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;posts&#34;</span>, <span style=color:#e6db74>&#34;comments&#34;</span>, <span style=color:#e6db74>&#34;albums&#34;</span>, <span style=color:#e6db74>&#34;photos&#34;</span>, <span style=color:#e6db74>&#34;todos&#34;</span>, <span style=color:#e6db74>&#34;users&#34;</span>];

<span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getResource</span>(<span style=color:#a6e22e>resource</span>){
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>base_url</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>resource</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>;
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>url</span>);
  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>json</span>();
}

<span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getAllResources</span>(){
  <span style=color:#a6e22e>promises</span> <span style=color:#f92672>=</span> [];
  <span style=color:#a6e22e>resource_list</span>.<span style=color:#a6e22e>forEach</span>(<span style=color:#a6e22e>resource</span> =&gt; {
    <span style=color:#a6e22e>promises</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>getResource</span>(<span style=color:#a6e22e>resource</span>));
  });
  <span style=color:#66d9ef>return</span> Promise.<span style=color:#a6e22e>all</span>(<span style=color:#a6e22e>promises</span>);
}

<span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>posts</span>, <span style=color:#a6e22e>comments</span>, <span style=color:#a6e22e>albums</span>, <span style=color:#a6e22e>photos</span>, <span style=color:#a6e22e>todos</span>, <span style=color:#a6e22e>users</span>] <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getAllResources</span>();
</code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://fabioboris.com.br/tags/js/>js</a></li><li><a href=https://fabioboris.com.br/tags/callback/>callback</a></li><li><a href=https://fabioboris.com.br/tags/promise/>promise</a></li><li><a href=https://fabioboris.com.br/tags/async/>async</a></li><li><a href=https://fabioboris.com.br/tags/await/>await</a></li></ul><nav class=paginav><a class=prev href=https://fabioboris.com.br/posts/notas-de-aulas/javascript/9-programacao-orientada-a-objetos/><span class=title>¬´ Prev Page</span><br><span>Notas de Aulas de JavaScript: 9. Programa√ß√£o Orientada a Objetos</span></a>
<a class=next href=https://fabioboris.com.br/posts/notas-de-aulas/javascript/7-modulos/><span class=title>Next Page ¬ª</span><br><span>Notas de Aulas de JavaScript: 7. M√≥dulos</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://fabioboris.com.br/>Blog do Prof. Fabio</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})});var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>